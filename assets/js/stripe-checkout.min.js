!function c(i,s,a){function m(r,e){if(!s[r]){if(!i[r]){var n="function"==typeof require&&require;if(!e&&n)return n(r,!0);if(d)return d(r,!0);var o=new Error("Cannot find module '"+r+"'");throw o.code="MODULE_NOT_FOUND",o}var t=s[r]={exports:{}};i[r][0].call(t.exports,function(e){return m(i[r][1][e]||e)},t,t.exports,c,i,s,a)}return s[r].exports}for(var d="function"==typeof require&&require,e=0;e<a.length;e++)m(a[e]);return m}({1:[function(e,r,n){"use strict";jQuery(function(s){try{var o=Stripe(wcv_sc_params.key)}catch(e){return void console.log(e)}var n,t,c,e=Object.keys(wcv_sc_params.elements_options).length?wcv_sc_params.elements_options:{},i=o.elements(e),a={init:function(){this.stripe_checkout_submit=!1,s("form.woocommerce-checkout").length&&(this.form=s("form.woocommerce-checkout")),s("form.woocommerce-checkout").on("checkout_place_order_stripe-connect",this.onSubmit),s("form#order_review").length&&(this.form=s("form#order_review")),s("form#order_review, form#add_payment_method").on("submit",this.onSubmit),s("form#add_payment_method").length&&(this.form=s("form#add_payment_method")),s("form.woocommerce-checkout").on("change",this.reset),s(document).on("stripeConnectError",this.onError).on("checkout_error",this.reset),a.createElements(),window.addEventListener("hashchange",a.onHashChange),"yes"===wcv_sc_params.is_stripe_checkout&&s(document.body).on("click","#place_order",function(){if(a.isStripeCardChosen())return a.openModal(),!1})},unmountElements:function(){n.unmount("#stripe-connect-card-element"),t.unmount("#stripe-connect-exp-element"),c.unmount("#stripe-connect-cvc-element")},mountElements:function(){s("#stripe-connect-card-element").length&&(n.mount("#stripe-connect-card-element"),t.mount("#stripe-connect-exp-element"),c.mount("#stripe-connect-cvc-element"))},createElements:function(){var e={base:{iconColor:"#666EE8",color:"#31325F",fontSize:"15px","::placeholder":{color:"#CFD7E0"}}},r={focus:"focused",empty:"empty",invalid:"invalid"};n=i.create("cardNumber",{style:e,classes:r}),t=i.create("cardExpiry",{style:e,classes:r}),c=i.create("cardCvc",{style:e,classes:r}),n.addEventListener("change",function(e){a.onCCFormChange(),a.updateCardBrand(e.brand),s("input.stripe-connect-source").remove(),e.error&&s(document.body).trigger("stripeConnectError",e)}),t.addEventListener("change",function(e){a.onCCFormChange(),s("input.stripe-connect-source").remove(),e.error&&s(document.body).trigger("stripeConnectError",e)}),c.addEventListener("change",function(e){a.onCCFormChange(),s("input.stripe-connect-source").remove(),e.error&&s(document.body).trigger("stripeConnectError",e)}),"yes"===wcv_sc_params.is_checkout?s(document.body).on("updated_checkout",function(){n&&a.unmountElements(),a.mountElements(),s("#stripe-iban-element").length&&iban.mount("#stripe-iban-element")}):(s("form#add_payment_method").length||s("form#order_review").length)&&(a.mountElements(),s("#stripe-iban-element").length&&iban.mount("#stripe-iban-element"))},onCCFormChange:function(){a.reset()},updateCardBrand:function(e){var r={visa:"stripe-visa-brand",mastercard:"stripe-mastercard-brand",amex:"stripe-amex-brand",discover:"stripe-discover-brand",diners:"stripe-diners-brand",jcb:"stripe-jcb-brand",unknown:"stripe-credit-card-brand"},n=s(".stripe-card-brand"),o="stripe-credit-card-brand";e in r&&(o=r[e]),s.each(r,function(e,r){n.removeClass(r)}),n.addClass(o)},openModal:function(){var n=a.form,e=s("#stripe-connect-payment-data");a.reset();StripeCheckout.open({key:wcv_sc_params.key,billingAddress:e.data("billing-address"),zipCode:e.data("verify-zip"),amount:e.data("amount"),name:e.data("name"),description:e.data("description"),currency:e.data("currency"),image:e.data("image"),locale:e.data("locale"),email:s("#billing_email").val()||e.data("email"),panelLabel:e.data("panel-label"),allowRememberMe:e.data("allow-remember-me"),token:function(e){if(n.find("input.stripe_source").remove(),"token"===e.object)o.createSource({type:"card",token:e.id}).then(a.sourceResponse);else if("source"===e.object){var r={source:e};a.sourceResponse(r)}},closed:a.onClose()})},resetModal:function(){a.reset(),a.stripe_checkout_submit=!1},onClose:function(){a.unblock()},unblock:function(){a.form.unblock()},reset:function(){s(".wcv-stripe-connect-error, .stripeConnectError, .stripe_connect_token").remove(),"yes"===wcv_sc_params.is_stripe_checkout&&(a.stripe_submit=!1)},isStripeConnectChosen:function(){return s("#payment_method_stripe-connect").is(":checked")||s("#payment_method_stripe-connect").is(":checked")&&"new"===s('input[name="wc-stripe-payment-token"]:checked').val()},isStripeSaveCardChosen:function(){return s("#payment_method_stripe-connect").is(":checked")&&s('input[name="wc-stripe-connect-payment-token"]').is(":checked")&&"new"!==s('input[name="wc-stripe-connect-payment-token"]:checked').val()},isStripeCardChosen:function(){return s("#payment_method_stripe-connect").is(":checked")},hasSource:function(){return 0<s("input.stripe-connect-source").length},hasToken:function(){return 0<s("input.stripe_connect_token").length},isMobile:function(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},isStripeModalNeeded:function(){var e=a.form.find("input.stripe_connect_token");return(!a.stripe_submit||!e)&&!!a.isStripeConnectChosen()},block:function(){a.isMobile()||a.form.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},getCustomerDetails:function(){var e=s("#billing_first_name").length?s("#billing_first_name").val():wcv_sc_params.billing_first_name,r=s("#billing_last_name").length?s("#billing_last_name").val():wcv_sc_params.billing_last_name,n={owner:{name:"",address:{},email:"",phone:""}};return n.owner.name=e,n.owner.name=e&&r?e+" "+r:s("#stripe-payment-data").data("full-name"),n.owner.email=s("#billing_email").val(),n.owner.phone=s("#billing_phone").val(),(void 0===n.owner.phone||n.owner.phone.length<=0)&&delete n.owner.phone,(void 0===n.owner.email||n.owner.email.length<=0)&&(s("#stripe-connect-payment-data").data("email").length?n.owner.email=s("#stripe-connect-payment-data").data("email"):delete n.owner.email),(void 0===n.owner.name||n.owner.name.length<=0)&&delete n.owner.name,0<s("#billing_address_1").length?(n.owner.address.line1=s("#billing_address_1").val(),n.owner.address.line2=s("#billing_address_2").val(),n.owner.address.state=s("#billing_state").val(),n.owner.address.city=s("#billing_city").val(),n.owner.address.postal_code=s("#billing_postcode").val(),n.owner.address.country=s("#billing_country").val()):wcv_sc_params.billing_address_1&&(n.owner.address.line1=wcv_sc_params.billing_address_1,n.owner.address.line2=wcv_sc_params.billing_address_2,n.owner.address.state=wcv_sc_params.billing_state,n.owner.address.city=wcv_sc_params.billing_city,n.owner.address.postal_code=wcv_sc_params.billing_postcode,n.owner.address.country=wcv_sc_params.billing_country),n},createSource:function(){var e=a.getCustomerDetails();o.createSource(n,e).then(a.sourceResponse)},sourceResponse:function(e){e.error?s(document.body).trigger("stripeConnectError",e):"no"===wcv_sc_params.allow_prepaid_card&&"card"===e.source.type&&"prepaid"===e.source.card.funding?(e.error={message:wcv_sc_params.no_prepaid_card_msg},"yes"===wcv_sc_params.is_stripe_checkout?a.submitError('<ul class="woocommerce-error"><li>'+wcv_sc_params.no_prepaid_card_msg+"</li></ul>"):s(document.body).trigger("stripeConnectError",e)):a.processStripeResponse(e.source)},processStripeResponse:function(e){a.reset(),a.form.append("<input type='hidden' class='stripe-connect-source' name='stripe_connect_source' value='"+e.id+"'/>"),s("form#add_payment_method").length&&s(a.form).off("submit",a.form.onSubmit),a.form.submit()},onSubmit:function(e){if(a.isStripeConnectChosen())return a.isStripeSaveCardChosen()||a.hasSource()||a.hasToken()?void 0:(e.preventDefault(),a.block(),"yes"===wcv_sc_params.is_stripe_checkout&&a.isStripeModalNeeded()&&a.isStripeCardChosen()?"yes"===wcv_sc_params.is_checkout||(a.openModal(),!1):(a.createSource(),!1))},getSelectedPaymentElement:function(){return s('.payment_methods input[name="payment_method"]:checked')},onError:function(e,r){var n,o=r.error.message,t=a.getSelectedPaymentElement().closest("li"),c=t.find(".woocommerce-SavedPaymentMethods-tokenInput");if(c.length){var i=c.filter(":checked");n=i.closest(".woocommerce-SavedPaymentMethods-new").length?s("#wcv-stripe-connect-cc-form .stripe-connect-source-errors"):i.closest("li").find(".stripe-connect-source-errors")}else n=t.find(".stripe-connect-source-errors");"invalid_request_error"!==r.error.type&&"api_connection_error"!==r.error.type&&"api_error"!==r.error.type&&"authentication_error"!==r.error.type&&"rate_limit_error"!==r.error.type||(o=wcv_sc_params.invalid_request_error),"card_error"===r.error.type&&wcv_sc_params.hasOwnProperty(r.error.code)&&(o=wcv_sc_params[r.error.code]),"validation_error"===r.error.type&&wcv_sc_params.hasOwnProperty(r.error.code)&&(o=wcv_sc_params[r.error.code]),a.reset(),s(".woocommerce-NoticeGroup-checkout").remove(),console.log(r.error.message),n.html('<ul class="woocommerce_error woocommerce-error wcv-stripe-connect-error"><li>'+o+"</li></ul>"),s(".wcv-stripe-connect-error").length&&s("html, body").animate({scrollTop:s(".wcv-stripe-connect-error").offset().top-200},200),a.unblock()},submitError:function(e){s(".woocommerce-NoticeGroup-checkout, .woocommerce-error, .woocommerce-message").remove(),a.form.prepend('<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout">'+e+"</div>"),a.form.removeClass("processing").unblock(),a.form.find(".input-text, select, input:checkbox").blur();var r="";s("#add_payment_method").length&&(r=s("#add_payment_method")),s("#order_review").length&&(r=s("#order_review")),s("form.checkout").length&&(r=s("form.checkout")),r.length&&s("html, body").animate({scrollTop:r.offset().top-100},500),s(document.body).trigger("checkout_error"),a.unblock()},onHashChange:function(){var e=window.location.hash.match(/^#?confirm-pi-([^:]+):(.+)$/);if(e&&!(e.length<3)){var r=e[1],n=decodeURIComponent(e[2]);window.location.hash="",a.openIntentModal(r,n)}},openIntentModal:function(e,r,n){o.handleCardAction(e).then(function(e){if(e.error)throw e.error;"requires_confirmation"===e.paymentIntent.status&&(window.location=r)}).catch(function(e){if(n)return window.location=r;s(document.body).trigger("stripeConnectError",{error:e}),a.form.removeClass("processing"),s.get(r+"&is_ajax")})}};a.init()})},{}]},{},[1]);